{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/./master/nextflow_schema.json",
  "title": ". pipeline parameters",
  "description": "",
  "type": "object",
  "definitions": {
      "input_output": {
          "title": "Input / Output",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "reads": {
                  "type": "string",
                  "description": "Path to the input directory that contains the reads to be processed."
              },
              "output": {
                  "type": "string",
                  "description": "Path to the output directory that save the results."
              },
              "assembly_publish": {
                  "type": "string",
                  "default": "link",
                  "description": "Method used by Nextflow to publish the generated assemblies.",
                  "hidden": true
              }
          },
          "required": [
              "reads",
              "output",
              "assembly_publish"
          ]
      },
      "qc_parameters": {
          "title": "QC Parameters",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "spneumo_percentage": {
                  "type": "number",
                  "default": 60,
                  "description": "Minimum S. pneumoniae percentage in reads to pass Taxonomy QC.",
                  "hidden": true
              },
              "ref_coverage": {
                  "type": "number",
                  "default": 60,
                  "description": "Minimum reference coverage percentage by the reads to pass Mapping QC.",
                  "hidden": true
              },
              "het_snp_site": {
                  "type": "integer",
                  "default": 220,
                  "description": "Maximum non-cluster heterozygous SNP (Het-SNP) site count to pass Mapping QC.",
                  "hidden": true
              },
              "contigs": {
                  "type": "integer",
                  "default": 500,
                  "hidden": true,
                  "description": "Maximum contig count in assembly to pass Assembly QC."
              },
              "length_low": {
                  "type": "integer",
                  "default": 1900000,
                  "hidden": true,
                  "description": "Minimum assembly length to pass Assembly QC."
              },
              "length_high": {
                  "type": "integer",
                  "default": 2300000,
                  "hidden": true,
                  "description": "Maximum assembly length to pass Assembly QC."
              },
              "depth": {
                  "type": "number",
                  "default": 20,
                  "hidden": true,
                  "description": "Minimum sequencing depth to pass Assembly QC."
              }
          },
          "required": [
              "spneumo_percentage",
              "ref_coverage",
              "het_snp_site",
              "contigs",
              "length_low",
              "length_high",
              "depth"
          ]
      },
      "assembly": {
          "title": "Assembly",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "assembler": {
                  "type": "string",
                  "default": "shovill",
                  "hidden": true,
                  "description": "Using which SPAdes-based assembler to assemble the reads."
              },
              "min_contig_length": {
                  "type": "integer",
                  "default": 500,
                  "description": "Minimum legnth of contig to be included in the assembly.",
                  "hidden": true
              }
          },
          "required": [
              "assembler",
              "min_contig_length"
          ]
      },
      "mapping": {
          "title": "Mapping",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "ref_genome": {
                  "type": "string",
                  "default": "${projectDir}/data/ATCC_700669_v1.fa",
                  "hidden": true,
                  "description": "Path to the reference genome for mapping."
              },
              "ref_genome_bwa_db_local": {
                  "type": "string",
                  "default": "${projectDir}/databases/bwa_ref_db",
                  "description": "Path to the directory where the reference genome FM-index database for BWA should be saved to.",
                  "hidden": true
              }
          },
          "required": [
              "ref_genome",
              "ref_genome_bwa_db_local"
          ]
      },
      "taxonomy": {
          "title": "Taxonomy",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "kraken2_db_remote": {
                  "type": "string",
                  "default": "https://genome-idx.s3.amazonaws.com/kraken/minikraken2_v1_8GB_201904.tgz",
                  "hidden": true,
                  "description": "URL to a Kraken2 database."
              },
              "kraken2_db_local": {
                  "type": "string",
                  "default": "${projectDir}/databases/kraken",
                  "hidden": true,
                  "description": "Path to the directory where the remote Kraken2 database should be saved to."
              },
              "kraken2_memory_mapping": {
                  "type": "boolean",
                  "default": true,
                  "hidden": true,
                  "description": "Using the memory mapping option of Kraken2 or not."
              }
          },
          "required": [
              "kraken2_db_remote",
              "kraken2_db_local",
              "kraken2_memory_mapping"
          ]
      },
      "serotype": {
          "title": "Serotype",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "seroba_db_remote": {
                  "type": "string",
                  "default": "https://github.com/sanger-pathogens/seroba.git",
                  "hidden": true,
                  "description": "URL to a SeroBA Git remote repository."
              },
              "seroba_db_local": {
                  "type": "string",
                  "default": "${projectDir}/databases/seroba",
                  "hidden": true,
                  "description": "Path to the directory where SeroBA local repository should be saved to."
              },
              "seroba_kmer": {
                  "type": "integer",
                  "default": 71,
                  "hidden": true,
                  "description": "Kmer size for creating the KMC database of SeroBA."
              }
          },
          "required": [
              "seroba_db_remote",
              "seroba_db_local",
              "seroba_kmer"
          ]
      },
      "lineage": {
          "title": "Lineage",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "poppunk_db_remote": {
                  "type": "string",
                  "default": "https://gps-project.cog.sanger.ac.uk/GPS_v6.tar.gz",
                  "hidden": true,
                  "description": "URL to a PopPUNK database."
              },
              "poppunk_ext_remote": {
                  "type": "string",
                  "default": "https://www.pneumogen.net/gps/GPS_v6_external_clusters.csv",
                  "hidden": true,
                  "description": "URL to a PopPUNK external clusters file."
              },
              "poppunk_db_local": {
                  "type": "string",
                  "default": "${projectDir}/databases/poppunk",
                  "hidden": true,
                  "description": "Path to the directory where the remote PopPUNK database and external clusters file should be saved to."
              }
          },
          "required": [
              "poppunk_db_remote",
              "poppunk_ext_remote",
              "poppunk_db_local"
          ]
      },
      "other_amr": {
          "title": "Other AMR",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "ariba_ref": {
                  "type": "string",
                  "default": "${projectDir}/data/ariba_ref_sequences-20230712.fasta",
                  "hidden": true,
                  "description": "Path to the reference sequences for ARIBA."
              },
              "ariba_metadata": {
                  "type": "string",
                  "default": "${projectDir}/data/ariba_metadata-20230712.tsv",
                  "hidden": true,
                  "description": "Path to the metadata file for ARIBA."
              },
              "ariba_db_local": {
                  "type": "string",
                  "default": "${projectDir}/databases/ariba",
                  "hidden": true,
                  "description": "Path to the directory where ARIBA reference database should be saved to."
              }
          },
          "required": [
              "ariba_ref",
              "ariba_metadata",
              "ariba_db_local"
          ]
      },
      "singularity": {
          "title": "Singularity",
          "type": "object",
          "description": "",
          "default": "",
          "properties": {
              "singularity_cachedir": {
                  "type": "string",
                  "description": "Path to the directory where Singularity images should be saved to.",
                  "hidden": true,
                  "default": "${projectDir}/singularity_cache"
              }
          },
          "required": [
              "singularity_cachedir"
          ]
      }
  },
  "allOf": [
      {
          "$ref": "#/definitions/input_output"
      },
      {
          "$ref": "#/definitions/qc_parameters"
      },
      {
          "$ref": "#/definitions/assembly"
      },
      {
          "$ref": "#/definitions/mapping"
      },
      {
          "$ref": "#/definitions/taxonomy"
      },
      {
          "$ref": "#/definitions/serotype"
      },
      {
          "$ref": "#/definitions/lineage"
      },
      {
          "$ref": "#/definitions/other_amr"
      },
      {
          "$ref": "#/definitions/singularity"
      }
  ]
}